{% extends "base.html" %}

{% block title %}Error - Sentiment-Based Product Recommendation System{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="text-center">
            <div class="card border-danger">
                <div class="card-body py-5">
                    <!-- Error Icon -->
                    <div class="mb-4">
                        <i class="fas fa-exclamation-triangle fa-5x text-danger"></i>
                    </div>
                    
                    <!-- Error Title -->
                    <h1 class="display-6 fw-bold text-danger mb-3">
                        Oops! Something went wrong
                    </h1>
                    
                    <!-- Error Message -->
                    <div class="alert alert-danger" role="alert">
                        <i class="fas fa-info-circle me-2"></i>
                        {{ error_message or "An unexpected error occurred. Please try again later." }}
                    </div>
                    
                    <!-- Helpful Information -->
                    <div class="mt-4">
                        <h5 class="text-muted mb-3">What you can do:</h5>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="card h-100 border-0 bg-light">
                                    <div class="card-body text-center">
                                        <i class="fas fa-home fa-2x text-primary mb-2"></i>
                                        <h6>Go Home</h6>
                                        <p class="small text-muted">Return to the main page and try again</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="card h-100 border-0 bg-light">
                                    <div class="card-body text-center">
                                        <i class="fas fa-refresh fa-2x text-success mb-2"></i>
                                        <h6>Refresh Page</h6>
                                        <p class="small text-muted">Sometimes a simple refresh fixes the issue</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="card h-100 border-0 bg-light">
                                    <div class="card-body text-center">
                                        <i class="fas fa-clock fa-2x text-warning mb-2"></i>
                                        <h6>Try Later</h6>
                                        <p class="small text-muted">The system might be temporarily unavailable</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="mt-4">
                        <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-home me-2"></i>
                            Go to Home
                        </a>
                        <button onclick="window.location.reload()" class="btn btn-outline-secondary btn-lg">
                            <i class="fas fa-refresh me-2"></i>
                            Refresh Page
                        </button>
                    </div>
                    
                    <!-- Additional Help -->
                    <div class="mt-5">
                        <small class="text-muted">
                            <i class="fas fa-question-circle me-1"></i>
                            If the problem persists, please check the 
                            <a href="{{ url_for('about') }}" class="text-decoration-none">About page</a> 
                            for system information.
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Auto-refresh after 30 seconds if it's a system initialization error
    const errorMessage = "{{ error_message }}";
    if (errorMessage.includes("not initialized") || errorMessage.includes("system")) {
        setTimeout(function() {
            if (confirm("The system might be ready now. Would you like to refresh the page?")) {
                window.location.reload();
            }
        }, 30000);
    }
</script>
{% endblock %}
